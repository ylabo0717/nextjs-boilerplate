# Integration テストコメントレビュー

対象例: `tests/integration/api/health.integration.test.ts` ほか

## health.integration.test.ts

- 整合性: 実装（`src/app/api/health/route.ts`）との整合は高い。フィールドスキーマ、キャッシュヘッダー、応答時間、並行性、ステートレス性など、運用上の重要論点が網羅されておりコメントの意図も明確。
- 指摘（軽微）:
  - `content-type` の検証は `toBe('application/json')` となっている箇所があるため、E2E と同様に `toContain('application/json')` へ寄せると将来の charset 追加に対して堅牢。
  - ヘッダー名の大文字小文字差異への言及を @remarks に入れると、実装変更に強くなります。

## その他（監視・セキュリティ等）

- 監視/ログ関連の統合テストはケースの意図が比較的明確に書かれており、Why の観点も確保されています。
- ただし mocks 配下のハンドラ等はコメント量が少ないファイルも見受けられるため、"このモックが担保する契約" を1行記すとテスト可読性が上がります。

## 推奨

- API 系は仕様（契約）ベースの記述ができており良好。ヘッダーや環境差異への耐性に関する一言の運用記述を追加すると、長期的なメンテが楽になります。
