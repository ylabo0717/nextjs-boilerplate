# Utils / Setup テストコメントレビュー

対象: `tests/utils/*.ts`, `tests/setup/*.ts`

## 概況

- `tests/utils/docker-environment.ts` は日本語での背景説明が丁寧に記載され、運用上の注意（Docker-in-Docker では制約あり等）が明確です。TSDoc というより JSDoc 形式ですが、テストの意図（実行環境の条件分岐）を十分に補っています。
- `tests/utils/loki-test-helpers.ts` などヘルパーは先頭ブロックコメントがあり、補助関数ごとに簡潔な意図記載があるとさらに良くなります。
- `tests/setup/*` はテスト起動時のセットアップであり、ブロックコメントでの説明があれば十分。複雑なモックや Testcontainers の準備がある箇所では、Why（なぜこれが必要か）を1行追記すると親切です。

## 提案

- Utils では関数単位の TSDoc を最小限でも良いので付けると、利用側（テストケース）からの参照性が高まります（引数・戻り値・副作用の明示）。
- Setup は変更頻度が低い一方、CI との相性で壊れやすい箇所です。@remarks で CI とローカルの差分（DIND の注意、必要な権限）を明記すると、将来のトラブルシュートが容易になります。
