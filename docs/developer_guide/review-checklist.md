# レビューチェックリスト

Pull Request をレビューする際の横断的な確認項目。必要なものだけ適用し、該当なしは省略可。

## 1. セキュリティ

- 機密情報（APIキー/シークレット/DB接続情報）がクライアントに露出していない
- サーバー側で最終的な認証・権限チェックを行っている
- 入力値検証（Zod 等）を外部境界（API, フォーム, ENV）で実施

## 2. SSOT / 定数管理

- 重複リテラルが定数へ抽出されている
- `src/constants/` 既存値の再利用を検討済み

## 3. 型安全

- `any` 不使用（やむを得ない場合は理由コメント）
- `unknown` + 型ガード / Zod / `satisfies` の適切な活用
- 公開 API の戻り値が安定（破壊的変更時は CHANGELOG 記載）

## 4. アーキテクチャ

- ビジネスロジックが純粋関数として分離
- クラス使用が例外的ケースであり理由説明がある
- 副作用（I/O, 時刻, 乱数）が境界層に集中

## 5. Next.js パターン

- 不要な Client Component 化がない
- データ取得がサーバー側に寄せられている
- 並列取得 / キャッシュ / revalidate 戦略が明示

## 6. パフォーマンス & a11y

- 大型ライブラリの部分インポート / 動的 import 検討
- 再レンダー最小化（props 変化/依存配列）
- アクセシビリティ: 適切なセマンティクス / ラベル / キーボード操作

## 7. テスト

- 変更ロジックに対応するユニット/統合/E2E のいずれかが更新
- モック過多になっていない（振る舞いテスト維持）

## 8. ロギング / 観測性

- 失敗パスに構造化ログ
- 重要トランザクションに correlationId (将来導入計画可)

## 9. ドキュメント / メンテ

- 新しい公開関数や定数に JSDoc / ガイド追記
- README / 既存ガイドとの矛盾なし

## 10. CI / 品質ゲート

- Lint / Typecheck / Test ローカル合格
- パフォーマンス回帰が予想される場合はメトリクス更新

---

PR 説明に以下テンプレを貼るとレビュー効率が向上:

```text
Security: OK / N/A
SSOT: OK (新規定数: API_CONFIG.RETRY_LIMIT)
Type Safety: OK
Architecture: OK (純粋関数のみ)
Next.js: OK (全て Server Components)
Performance: OK
Tests: 追加 (order.test.ts)
Docs: N/A
CI: Lint/Type/Test PASS
```

---

関連: `coding-guidelines.md` の「横断レビュー・チェックリスト」節
