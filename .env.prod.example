# ==============================================================================
# 本番環境用 環境変数設定（.env.prod.example）
#
# 使用方法:
# 1. このファイルを .env.prod にコピー
# 2. 実際の値を設定（特に機密情報）
# 3. .env.base と組み合わせて使用:
#    docker compose -f docker-compose.prod.yml --env-file .env.base --env-file .env.prod up -d
#
# 注意: この設定は .env.base の設定を上書きします
# ==============================================================================

# ------------------------------------------------------------------------------
# Environment Configuration - 本番環境設定
# ------------------------------------------------------------------------------

# 本番環境指定
NODE_ENV=production

# 本番ポート設定
PROXY_PORT=8080
PROXY_SSL_PORT=8443

# ------------------------------------------------------------------------------
# OpenTelemetry / Monitoring Configuration - 本番環境用
# ------------------------------------------------------------------------------

# OpenTelemetry サービス設定（本番環境用）
OTEL_SERVICE_NAME=nextjs-app
OTEL_RESOURCE_ATTRIBUTES=service.name=${OTEL_SERVICE_NAME},service.version=${APP_VERSION}

# メトリクス エクスポート設定（Prometheusエンドポイント用）
# OTEL_EXPORTER_PROMETHEUS_PORT=9464
# OTEL_EXPORTER_PROMETHEUS_ENDPOINT=/metrics

# トレース エクスポート設定（必要に応じて）
# OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://jaeger:4317

# ------------------------------------------------------------------------------
# Security Configuration - 本番環境用（必須設定）
# ------------------------------------------------------------------------------

# JWT/認証関連（本番環境では必ず変更）
# JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
# SESSION_SECRET=your-session-secret-change-this-in-production

# NextAuth設定（本番環境用）
# NEXTAUTH_SECRET=your-nextauth-secret-change-this-in-production
# NEXTAUTH_URL=https://yourdomain.com

# CORS設定（本番ドメインに制限）
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# CSP (Content Security Policy) 設定（本番環境用・厳格設定）
# CSP_POLICY=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'

# ------------------------------------------------------------------------------
# Database Configuration - 本番環境用
# ------------------------------------------------------------------------------

# 本番データベース接続（実際の値に変更）
# DATABASE_URL=postgresql://username:password@localhost:5432/database_name
# REDIS_URL=redis://localhost:6379

# ------------------------------------------------------------------------------
# External Services Configuration - 本番環境用
# ------------------------------------------------------------------------------

# 本番API キー・認証情報（実際の値に変更）
# EXTERNAL_API_KEY=your-production-api-key
# THIRD_PARTY_SERVICE_URL=https://api.service.com

# ------------------------------------------------------------------------------
# Performance Configuration - 本番環境用（最適化）
# ------------------------------------------------------------------------------

# Node.js メモリ制限（本番最適化）
NODE_OPTIONS=--max-old-space-size=1024

# Next.js ビルド最適化
NEXT_DISABLE_SOURCEMAPS=true
NEXT_MINIMIZE=true

# ------------------------------------------------------------------------------
# Container Configuration - 本番環境用（本格リソース）
# ------------------------------------------------------------------------------

# 本番環境用リソース制限（.env.baseを上書き）
CONTAINER_MEMORY_LIMIT=1g
CONTAINER_CPU_LIMIT=0.5

# Nginx本番設定
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# ------------------------------------------------------------------------------
# Logging Configuration - 本番環境用
# ------------------------------------------------------------------------------

# ログ出力先設定（本番環境では通常 'console'）
LOG_OUTPUT=console

# ------------------------------------------------------------------------------
# SSL/TLS Configuration - 本番環境用（必要に応じて）
# ------------------------------------------------------------------------------

# SSL証明書設定（実装時に使用）
# SSL_CERT_PATH=/etc/ssl/certs/cert.pem
# SSL_KEY_PATH=/etc/ssl/private/key.pem

# ------------------------------------------------------------------------------
# Backup / Data Persistence Configuration - 本番環境用（必要に応じて）
# ------------------------------------------------------------------------------

# バックアップ設定（実装時に使用）
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30

# ------------------------------------------------------------------------------
# Monitoring Configuration - 本番監視設定（監視機能使用時に必要）
# ------------------------------------------------------------------------------

# Grafana管理者パスワード（監視ダッシュボード用）
# 🔒 本番環境では強固なパスワードを設定すること
GRAFANA_ADMIN_PASSWORD=change-this-secure-password-in-production

# Grafana管理者ユーザー名（デフォルト: admin）
GRAFANA_ADMIN_USER=admin

# Grafanaドメイン設定（実際のドメインに変更）
GRAFANA_DOMAIN=localhost

# ------------------------------------------------------------------------------
# IMPORTANT PRODUCTION SECURITY NOTES - 本番環境セキュリティ要件
# ------------------------------------------------------------------------------
#
# 🔒 必須セキュリティ要件:
# 1. すべての SECRET や KEY は本番環境で必ず変更すること
# 2. データベースパスワードは強固なものを使用すること
# 3. API キーは適切な権限制限を設定すること
# 4. 本番環境では .env.prod を .gitignore に追加すること
#
# 📝 運用時の注意:
# 1. 環境変数の変更後はコンテナの再起動が必要
# 2. 機密情報は Docker Secrets の使用を検討すること
# 3. 定期的なセキュリティ監査を実施すること
#
# 🔧 使用方法:
# docker compose -f docker-compose.prod.yml --env-file .env.base --env-file .env.prod up -d
#
# ==============================================================================